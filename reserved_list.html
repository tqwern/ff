<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>reserved list</title>
    <script src="./reservation.func.js"></script>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="./">Хотел</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="./reservation.html">Бронирование </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./reserved_list.html">Просмотр брони</a>
              </li>

            </ul>
          </div>
        </div>
      </nav>
    <table class="table table-bordered" id="dataTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Date From</th>
          <th>Date To</th>
          <th>Function</th>
        </tr>
      </thead>
      <tbody>
        <!-- Строки будут добавлены динамически -->
      </tbody>
    </table>
    <script>
      // Данные
      const busyApartments = busy_apartments()
      if (busyApartments === null) {
        busy_apartments([])
        busyApartments = busy_apartments()
      }
      // Получаем элемент таблицы
      const table = document.getElementById("dataTable");
      const tbody = table.getElementsByTagName("tbody")[0];

      // Функция для отрисовки
      function drawTable() {
        // Очистим таблицу
        tbody.innerHTML = "";

        // Пройдемся по массиву с данными
        busyApartments.forEach((item) => {
          // Создадим строку
          let row = tbody.insertRow();

          // Ячейки
          let idCell = row.insertCell(0);
          let nameCell = row.insertCell(1);
          let fromCell = row.insertCell(2);
          let toCell = row.insertCell(3);
          let Function = row.insertCell(4);
          // Заполним данными
          idCell.textContent = item.id;
          nameCell.textContent = item.name;
          fromCell.textContent = item.dateFrom;
          toCell.textContent = item.dateTo;
          Function.innerHTML = `
          <button type="button" onclick="deleteBusy(event ,${item.id} )" class="btn btn-danger">Удалить бронирование</button>
          `
        });
      }

      // Отрисовка при загрузке
      drawTable();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
